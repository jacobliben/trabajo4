(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/company_business_info/company_business_info"],{"0a50":function(e,t,r){"use strict";(function(e){r("c5c7");s(r("66fd"));var t=s(r("490f"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"46d1":function(e,t,r){"use strict";var s=r("a8e4"),a=r.n(s);a.a},"490f":function(e,t,r){"use strict";r.r(t);var s=r("593b"),a=r("8899");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("46d1");var n,o=r("f0c5"),c=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"74d3c65c",null,!1,s["a"],n);t["default"]=c.exports},"593b":function(e,t,r){"use strict";var s;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s}));var a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.id_begin_date_has_input=!0},e.e1=function(t){e.id_expiry_date_has_input=!0})},i=[]},"6e4e":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(r("a34a")),a=r("2e4a");r("59aa"),r("babb");function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,s,a,i,n){try{var o=e[i](n),c=o.value}catch(l){return void r(l)}o.done?t(c):Promise.resolve(c).then(s,a)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(s,a){var i=e.apply(t,r);function o(e){n(i,s,a,o,c,"next",e)}function c(e){n(i,s,a,o,c,"throw",e)}o(void 0)}))}}var c,l=function(){Promise.all([r.e("common/vendor"),r.e("components/simple-address-high/simple-address")]).then(function(){return resolve(r("0ce0"))}.bind(null,r)).catch(r.oe)},u=(r("6802"),{data:function(){var e=this.getDate({format:!0});return{isPerson:!1,tel:"1111",number_front:"",detail_address:"",legal_person:"",legal_person_id:"",company_name:"",transport_license_num:"",contact_name:"",cityPickerValueDefault:[0,0,1],disabled:!0,active:!1,origin_has_input:!1,previous_has_input:!1,pickerTextOrigin:"",imglegalPersonCerFrontUrl:"/static/id_front.jpg",imglegalPersonCerReverseUrl:"/static/id-back.jpg",imgBusinessLicenseUrl:"/static/id-front.png",imgTransportLicenseUrl:"/static/transport_license.jpg",imgBackUrl:"/static/id-back.jpg",tachar_legal_person_cer_front:!1,tachar_legal_person_cer_reverse:!1,tachar_business_license:!1,tachar_transport_license:!1,tachar_back:!1,photo_id:!0,id_begin_date:e,id_expiry_date:e,params:{active_one_step:!0,active_two_step:!0,the_step:2},params_business:{},validity_items:[{value:"1",name:"永久有效"},{value:"2",name:"有截止日期"}],validity_current:1,forever:!1,id_begin_date_has_input:!1,id_expiry_date_has_input:!1}},components:{simpleAddressHigh:l},computed:{endDate:function(){return this.getDate("end")}},created:function(){this.isPerson=e.getStorageSync("in_personal_registering"),this.params_business=e.getStorageSync("params_business"),this.tel=e.getStorageSync("contact_phone"),this.params.carrierContactsPhone=e.getStorageSync("contact_phone")},mounted:function(){this.isPerson?this.imgBusinessLicenseUrl="/static/id_front.jpg":this.imgBusinessLicenseUrl="/static/business_license.jpg";var e=this.params_business.whetherValidForever||2;this.validity_current=e-1,1==e&&(this.forever=!0),this.company_name=this.params_business.carrierName||"",this.number_front=this.params_business.carrierCertNum||"",this.detail_address=this.params_business.carrierAddress||"",this.transport_license_num=this.params_business.carrierRoadTransportBusinessLicenseNo||"",this.contact_name=this.params_business.carrierContacts||"",this.params_business.idcardValidPeriodFrom&&(this.id_begin_date=this.params_business.idcardValidPeriodFrom||this.getDate({format:!0}),this.id_begin_date_has_input=!0),this.params_business.idcardValidPeriodTo&&(this.id_expiry_date=this.params_business.idcardValidPeriodTo||this.getDate({format:!0}),this.id_expiry_date_has_input=!0),this.legal_person=this.params_business.legalPersonName||"",this.legal_person_id=this.params_business.legalPersonCer||"",this.pickerTextOrigin=this.params_business.pickerTextOrigin||"",this.previous_has_input=this.params_business.previous_has_input||!1,this.params=this.params_business||{},this.params_business.carrierRoadTransportBusinessLicenseNo&&(this.disabled=!1,this.active=!0)},methods:{radioValidityChange:function(e){this.params.whetherValidForever=parseInt(e.target.value),1==this.params.whetherValidForever?(this.forever=!0,this.params_business.idcardValidPeriodTo="2080-01-01"):this.forever=!1},selectOrigin:function(){var e=this.$refs.simpleAddressOrigin.queryIndex(["江苏省","徐州市","云龙区"],"label");this.cityPickerValueDefault=e.index,this.$refs.simpleAddressOrigin.open()},onConfirmOrigin:function(e){11==e.provinceCode||31==e.provinceCode||12==e.provinceCode||50==e.provinceCode?this.pickerTextOrigin=e.labelArr[0]+e.labelArr[2]:this.pickerTextOrigin=e.labelArr[0]+e.labelArr[1]+e.labelArr[2],this.params.pickerTextOrigin=this.pickerTextOrigin,this.params.carrierProvinceId=e.provinceCode,this.params.carrierCityId=e.cityCode,this.params.carrierDistrictId=e.areaCode,this.params.carrierRegionName=e.labelArr[2],this.params.carrierCityName=e.labelArr[1],this.params.carrierProvinceName=e.labelArr[0],this.origin_has_input=!0,this.previous_has_input=!0,this.params.previous_has_input=this.previous_has_input},detailImage:function(e,t){plus.io.resolveLocalFileSystemURL(e,(function(e){e.file((function(e){var r=new plus.io.FileReader;r.readAsDataURL(e),r.onloadend=function(e){t(e.target.result)}}))}))},getCompanyName:function(t){this.params.carrierName=t.target.value,this.company_name=t.target.value,this.isPerson&&(this.contact_name=this.company_name,this.params.carrierContacts=this.company_name,e.setStorageSync("holder_name",this.company_name))},bindDateChange:function(e){"id_begin_date"==e.currentTarget.dataset.index?(this.id_begin_date=e.target.value,this.params.idcardValidPeriodFrom=e.target.value,this.id_begin_date_has_input=!0):"id_expiry_date"==e.currentTarget.dataset.index&&(this.id_expiry_date=e.target.value,this.params.idcardValidPeriodTo=e.target.value,this.id_expiry_date_has_input=!0)},getDate:function(e){var t=new Date,r=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();return"start"===e?r-=60:"end"===e&&(r+=20),s=s>9?s:"0"+s,a=a>9?a:"0"+a,"".concat(r,"-").concat(s,"-").concat(a)},getBusinessLicenseNum:function(t){this.number_front=t.target.value,this.params.carrierCertNum=t.target.value,e.setStorageSync("driver_id_num",this.params.carrierCertNum)},getRegisteringAddress:function(e){this.detail_address=e.target.value,this.params.carrierAddress=e.target.value},getlegalPersonName:function(e){this.legal_person=e.target.value,this.params.legalPersonName=e.target.value,this.params.legalPersonCerType="201"},getlegalPersonID:function(e){this.legal_person_id=e.target.value,this.params.legalPersonCer=e.target.value},getTransportLicense:function(e){this.transport_license_num=e.target.value,this.params.carrierRoadTransportBusinessLicenseNo=e.target.value,this.disabled=!1,this.active=!0},getContact:function(e){this.contact_name=e.target.value,this.params.carrierContacts=e.target.value},getPhoneNumber:function(e){this.tel=e.target.value,this.params.carrierContactsPhone=e.target.value},takephotoLegal:function(e){var t=this;return o(s.default.mark((function r(){return s.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(c=t,"legalPersonCerFront"!=e.currentTarget.dataset.index){r.next=7;break}return r.next=4,t.$photo({count:1,sizeType:["original","compressed"],sourceType:["camera","album"],success:function(e){return o(s.default.mark((function t(){var r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.tempFilePaths,c.imglegalPersonCerFrontUrl=r[0],c.tachar_legal_person_cer_front=!0,t.next=5,c.$upload({url:a.ossLocation.legal.front,file_path:r[0]});case 5:t.sent;case 6:case"end":return t.stop()}}),t)})))()}});case 4:r.sent,r.next=17;break;case 7:if("legalPersonCerReverse"!=e.currentTarget.dataset.index){r.next=13;break}return r.next=10,t.$photo({success:function(e){return o(s.default.mark((function t(){var r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.tempFilePaths,c.imglegalPersonCerReverseUrl=r[0],c.tachar_legal_person_cer_reverse=!0,t.next=5,c.$upload({url:a.ossLocation.legal.reverse,file_path:r[0]});case 5:t.sent;case 6:case"end":return t.stop()}}),t)})))()}});case 10:r.sent,r.next=17;break;case 13:if("carrier_id_reverse"!=e.currentTarget.dataset.index){r.next=17;break}return r.next=16,t.$photo({success:function(e){return o(s.default.mark((function t(){var r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.tempFilePaths,c.imgBackUrl=r[0],c.tachar_back=!0,t.next=5,c.$upload({url:a.ossLocation.carrier.reverse,file_path:r[0]});case 5:t.sent;case 6:case"end":return t.stop()}}),t)})))()}});case 16:r.sent;case 17:case"end":return r.stop()}}),r)})))()},takephoto:function(t){c=this,e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera","album"],success:function(e){return o(s.default.mark((function r(){var i,n,o;return s.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("business_license"!=t.currentTarget.dataset.index){r.next=18;break}if(c.isPerson){r.next=10;break}return i=e.tempFilePaths,c.imgBusinessLicenseUrl=i[0],c.tachar_business_license=!0,r.next=7,c.$upload({url:a.ossLocation.carrier.front,file_path:i[0]});case 7:r.sent,r.next=16;break;case 10:return n=e.tempFilePaths,c.imgBusinessLicenseUrl=n[0],c.tachar_business_license=!0,r.next=15,c.$upload({url:a.ossLocation.carrier.front,file_path:n[0]});case 15:r.sent;case 16:r.next=26;break;case 18:if("transport_license"!=t.currentTarget.dataset.index){r.next=26;break}return o=e.tempFilePaths,console.log(o,"876"),c.imgTransportLicenseUrl=o[0],c.tachar_transport_license=!0,r.next=25,c.$upload({url:a.ossLocation.carrier.road,file_path:o[0]});case 25:r.sent;case 26:case"end":return r.stop()}}),r)})))()},error:function(e){console.log(e)}})},cancelLicense:function(t){console.log(t,"199"),"legal_person_cer_front"==t.currentTarget.dataset.index?(this.imglegalPersonCerFrontUrl="/static/id_front.jpg",setTimeout((function(){e.showToast({title:"删除照片成功，请重新选择",icon:"none"})}),500),this.tachar_legal_person_cer_front=!1):"legal_person_cer_reverse"==t.currentTarget.dataset.index?(this.imglegalPersonCerReverseUrl="/static/id-back.jpg",setTimeout((function(){e.showToast({title:"删除照片成功，请重新选择",icon:"none"})}),500),this.tachar_legal_person_cer_reverse=!1):"business_license"==t.currentTarget.dataset.index?(this.isPerson?this.imgBusinessLicenseUrl="/static/id_front.jpg":this.imgBusinessLicenseUrl="/static/business_license.jpg",setTimeout((function(){e.showToast({title:"删除照片成功，请重新选择",icon:"none"})}),500),this.tachar_business_license=!1):"transport_license"==t.currentTarget.dataset.index&&(this.imgTransportLicenseUrl="/static/transport_license.jpg",setTimeout((function(){e.showToast({title:"删除照片成功，请重新选择",icon:"none"})}),500),this.tachar_transport_license=!1)},cancelBack:function(){this.imgBackUrl="/static/id-back.jpg",setTimeout((function(){e.showToast({title:"删除照片成功，请重新选择",icon:"none"})}),500),this.tachar_back=!1},backPhoneVerifying:function(){this.params.the_step=1,this.params.active_one_step=!0,this.params.active_two_step=!1,this.params.active_three_step=!1,this.params.active_four_step=!1,this.params.active_five_step=!1,e.setStorageSync("params_business",this.params),this.$emit("register_business_params",this.params)},formSubmit:function(t){if(!this.isPerson){if(this.params.legalPersonCerFront=e.getStorageSync("legalPersonCerFront"),null==this.params.legalPersonCerFront||""==this.params.legalPersonCerFront||this.params.legalPersonCerFront.length<1)return void e.showToast({title:"未提交法人身份证正面, 请提交",icon:"none"});if(this.params.legalPersonCerReverse=e.getStorageSync("legalPersonCerReverse"),null==this.params.legalPersonCerReverse||""==this.params.legalPersonCerReverse||this.params.legalPersonCerReverse.length<1)return void e.showToast({title:"未提交法人证件身份证背面, 请提交",icon:"none"});if(this.params.carrierRoadTransportBusinessLicense=e.getStorageSync("carrierRoadTransportBusinessLicense"),null==this.params.carrierRoadTransportBusinessLicense||""==this.params.carrierRoadTransportBusinessLicense||this.params.carrierRoadTransportBusinessLicense.length<1)return void e.showToast({title:"未提交道路运输经营许可证, 请提交",icon:"none"})}if(this.params.carrierCardFront=e.getStorageSync("carrierCardFront"),null==this.params.carrierCardFront||""==this.params.carrierCardFront||this.params.carrierCardFront.length<1)this.isPerson?e.showToast({title:"未提交身份证正面, 请提交",icon:"none"}):e.showToast({title:"未提交营业执照, 请提交",icon:"none"});else if(this.params.carrierCardReverse=e.getStorageSync("carrierCardReverse"),this.isPerson&&(null==this.params.carrierCardReverse||""==this.params.carrierCardReverse||this.params.carrierCardReverse.length<1))e.showToast({title:"未提交身份证背面, 请提交",icon:"none"});else if(null==this.params.carrierName||""==this.params.carrierName||this.params.carrierName.length<1)this.isPerson?e.showToast({title:"未输入承运人姓名, 请输入",icon:"none"}):e.showToast({title:"未输入承运企业名称, 请输入",icon:"none"});else if(null==this.params.carrierCertNum||""==this.params.carrierCertNum||this.params.carrierCertNum.length<18)this.isPerson?(e.showToast({title:"承运人身份证号不正确, 请重输",icon:"none"}),this.number_front=""):(e.showToast({title:"承运企业营业执照号码不正确, 请重输",icon:"none"}),this.number_front="");else if(null==this.params.carrierDistrictId||""==this.params.carrierDistrictId||this.params.carrierDistrictId.length<1)e.showToast({title:"未选择所属区域, 请选择",icon:"none"});else if(null==this.params.carrierAddress||""==this.params.carrierAddress||this.params.carrierAddress.length<1)this.isPerson?e.showToast({title:"未输入详细地址, 请输入",icon:"none"}):e.showToast({title:"未输入注册地址, 请输入",icon:"none"});else{if(!this.isPerson){if(null==this.params.legalPersonName||""==this.params.legalPersonName||this.params.legalPersonName.length<1)return void e.showToast({title:"未输入法人代表名称, 请输入",icon:"none"});if(null==this.params.legalPersonCer||""==this.params.legalPersonCer||this.params.legalPersonCer.length<18)return void e.showToast({title:"法人代表身份证号码不正确, 请重输",icon:"none"})}null==this.params.carrierRoadTransportBusinessLicenseNo||""==this.params.carrierRoadTransportBusinessLicenseNo||this.params.carrierRoadTransportBusinessLicenseNo.length<1?e.showToast({title:"未输入运输经营许可证号码, 请输入",icon:"none"}):null==this.params.carrierContacts||""==this.params.carrierContacts||this.params.carrierContacts.length<1?e.showToast({title:"未输入业务联系人, 请输入",icon:"none"}):(this.params.carrierContactsPhone=this.tel,console.log("form发生了submit事件，携带数据为："+JSON.stringify(t.detail.value)),e.setStorageSync("params_business",this.params),this.params.the_step=3,this.params.active_one_step=!0,this.params.active_two_step=!0,this.params.active_three_step=!0,this.params.active_four_step=!1,this.params.active_five_step=!1,this.$emit("register_business_params",this.params))}}}});t.default=u}).call(this,r("543d")["default"])},8899:function(e,t,r){"use strict";r.r(t);var s=r("6e4e"),a=r.n(s);for(var i in s)"default"!==i&&function(e){r.d(t,e,(function(){return s[e]}))}(i);t["default"]=a.a},a8e4:function(e,t,r){}},[["0a50","common/runtime","common/vendor"]]]);
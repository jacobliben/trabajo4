(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/calc_miles/calc_miles"],{"29fb":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={simpleAddress:function(){return Promise.all([i.e("common/vendor"),i.e("components/simple-address/simple-address")]).then(i.bind(null,"e3b8"))}},a=function(){var e=this,t=e.$createElement;e._self._c},o=[]},"33d6":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("6f36"));a(i("b14d"));function a(e){return e&&e.__esModule?e:{default:e}}var o,s,r,c,l,d,u,f=function(){Promise.all([i.e("common/vendor"),i.e("components/simple-address/simple-address")]).then(function(){return resolve(i("e3b8"))}.bind(null,i)).catch(i.oe)},p={data:function(){return{cityPickerValueDefault:[0,0,1],pickerTextOrigin:"",pickerTextDesti:"",origin_has_input:!1,desti_has_input:!1,items:[{value:"speed_important",name:"速度最快"},{value:"fee_important",name:"费用最低"},{value:"distance_important",name:"距离最短"}],current:0,short_distance:null,fee_per_km:null,show_choice:!1,modalName:null,total_fee:null,modalNameBottom:null,longitude:117.234135,latitude:34.315564,id:0,covers:[],polyline:[]}},components:{simpleAddress:f},onLoad:function(){},methods:{setData:function(e){var t,i,n=this,a=[];Object.keys(e).forEach((function(o){a=o.split("."),t=e[o],i=n.$data,a.forEach((function(e,o){o+1==a.length?n.$set(i,e,t):i[e]||n.$set(i,e,{}),i=i[e]}))}))},selectOrigin:function(){var e=this.$refs.simpleAddressOrigin.queryIndex(["江苏省","徐州市","云龙区"],"label");this.cityPickerValueDefault=e.index,this.$refs.simpleAddressOrigin.open()},selectDesti:function(){var e=this.$refs.simpleAddressDesti.queryIndex(["江苏省","徐州市","云龙区"],"label");this.cityPickerValueDefault=e.index,this.$refs.simpleAddressDesti.open()},radioChange:function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].value===e.target.value){this.current=t,this.findPath();break}},onConfirmOrigin:function(e){11==e.provinceCode||31==e.provinceCode||12==e.provinceCode||50==e.provinceCode?this.pickerTextOrigin=e.labelArr[0]+e.labelArr[2]:this.pickerTextOrigin=e.labelArr[0]+e.labelArr[1]+e.labelArr[2],this.origin_has_input=!0,r&&c&&l&&d&&this.findPath()},findPath:function(){var t=this;e.request({url:"https://restapi.amap.com/v3/geocode/geo?address=".concat(t.pickerTextOrigin,"&key=ae8b30ff7c227fb962010579230bf568"),success:function(i){s=i.data.geocodes[0].location.split(","),r=parseFloat(s[1]),c=parseFloat(s[0]),e.request({url:"https://restapi.amap.com/v3/geocode/geo?address=".concat(t.pickerTextDesti,"&key=ae8b30ff7c227fb962010579230bf568"),success:function(i){l=i.data.geocodes[0].location.split(","),d=parseFloat(l[1]),u=parseFloat(l[0]),e.request({url:"https://restapi.amap.com/v3/direction/driving?origin=".concat(c,"%2C").concat(r,"&destination=").concat(u,"%2C").concat(d,"&strategy=").concat(t.current||0,"&key=ae8b30ff7c227fb962010579230bf568"),success:function(e){t.short_distance=parseFloat(e.data.route.paths[0].distance)/1e3,t.short_distance=t.short_distance,t.short_distance=t.short_distance.toFixed(2),t.drawRoutes()}})}})}})},onConfirmDesti:function(e){11==e.provinceCode||31==e.provinceCode||12==e.provinceCode||50==e.provinceCode?this.pickerTextDesti=e.labelArr[0]+e.labelArr[2]:this.pickerTextDesti=e.labelArr[0]+e.labelArr[1]+e.labelArr[2],this.desti_has_input=!0,this.findPath(),this.show_choice=!0},calcuFee:function(e){this.modalName="FeeInput"},getTotalFee:function(){this.total_fee=this.fee_per_km*this.short_distance,this.total_fee=this.total_fee.toFixed(2),this.modalName=null,this.modalNameBottom="FeeTotal"},hideModal:function(e){this.modalName=null},getFeePerKm:function(e){this.fee_per_km=e.detail.value},hideModalBottom:function(e){this.modalNameBottom=null},drawRoutes:function(){o=this;var e=c+","+r,t=u+","+d,i=new n.default.AMapWX({key:"91897d2c2d83d2cf1b694feb173e4fc9"});i.getDrivingRoute({origin:e,destination:t,strategy:o.current||0,success:function(e){o.latitude=r,o.longitude=c;var t=[];if(e.paths&&e.paths[0]&&e.paths[0].steps)for(var i=e.paths[0].steps,n=0;n<i.length;n++)for(var a=i[n].polyline.split(";"),s=0;s<a.length;s++)t.push({longitude:parseFloat(a[s].split(",")[0]),latitude:parseFloat(a[s].split(",")[1])});o.covers=[{latitude:r,longitude:c,iconPath:"/static/start-point2.png",width:23,height:23},{latitude:d,longitude:u,iconPath:"/static/end-point2.png",width:23,height:23}],o.polyline=[{points:t,color:"#0000AA",width:6,dottedLine:!0,arrowLine:!0}]},fail:function(e){}})}}};t.default=p}).call(this,i("543d")["default"])},7042:function(e,t,i){"use strict";i.r(t);var n=i("29fb"),a=i("abb2");for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("d4cb");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"2c49cdb4",null,!1,n["a"],s);t["default"]=c.exports},abb2:function(e,t,i){"use strict";i.r(t);var n=i("33d6"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},cecf:function(e,t,i){},d4cb:function(e,t,i){"use strict";var n=i("cecf"),a=i.n(n);a.a},d876:function(e,t,i){"use strict";(function(e){i("c5c7");n(i("66fd"));var t=n(i("7042"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])}},[["d876","common/runtime","common/vendor"]]]);